# [设定值](https://www.django-rest-framework.org/api-guide/settings/#settings)

> 命名空间是一个很棒的主意-让我们做更多这些吧！
>
> — [Python的禅宗](https://www.python.org/dev/peps/pep-0020/)

REST框架的配置都在一个名为的Django设置中所有命名空间`REST_FRAMEWORK`。

例如，您的项目`settings.py`文件可能包含以下内容：

```
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': [
        'rest_framework.renderers.JSONRenderer',
    ],
    'DEFAULT_PARSER_CLASSES': [
        'rest_framework.parsers.JSONParser',
    ]
}
```

## [访问设置](https://www.django-rest-framework.org/api-guide/settings/#accessing-settings)

如果需要在项目中访问REST框架的API设置的值，则应使用`api_settings`对象。例如。

```
from rest_framework.settings import api_settings

print(api_settings.DEFAULT_AUTHENTICATION_CLASSES)
```

该`api_settings`对象将检查是否有任何用户定义的设置，否则将退回到默认值。使用字符串导入路径引用类的任何设置都将自动导入并返回引用的类，而不是字符串文字。

------

# [API参考](https://www.django-rest-framework.org/api-guide/settings/#api-reference)

## [API政策设定](https://www.django-rest-framework.org/api-guide/settings/#api-policy-settings)

*以下设置控制基本的API策略，并应用于每个`APIView`基于类的视图或`@api_view`基于函数的视图。*

#### [DEFAULT_RENDERER_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#default_renderer_classes)

渲染器类的列表或元组，确定返回`Response`对象时可以使用的默认渲染器集。

默认：

```
[
    'rest_framework.renderers.JSONRenderer',
    'rest_framework.renderers.BrowsableAPIRenderer',
]
```

#### [DEFAULT_PARSER_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#default_parser_classes)

解析器类的列表或元组，确定访问`request.data`属性时使用的默认解析器集。

默认：

```
[
    'rest_framework.parsers.JSONParser',
    'rest_framework.parsers.FormParser',
    'rest_framework.parsers.MultiPartParser'
]
```

#### [DEFAULT_AUTHENTICATION_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#default_authentication_classes)

身份验证类的列表或元组，确定访问`request.user`或`request.auth`属性时使用的默认身份验证器集。

默认：

```
[
    'rest_framework.authentication.SessionAuthentication',
    'rest_framework.authentication.BasicAuthentication'
]
```

#### [DEFAULT_PERMISSION_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#default_permission_classes)

权限类的列表或元组，用于确定在视图开始时检查的默认权限集。列表中的每个类都必须授予权限。

默认：

```
[
    'rest_framework.permissions.AllowAny',
]
```

#### [DEFAULT_THROTTLE_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#default_throttle_classes)

节气门类的列表或元组，用于确定在视图开始时检查的默认节气门集合。

默认： `[]`

#### [DEFAULT_CONTENT_NEGOTIATION_CLASS](https://www.django-rest-framework.org/api-guide/settings/#default_content_negotiation_class)

内容协商类，用于确定给定传入请求时如何选择渲染器用于响应。

默认： `'rest_framework.negotiation.DefaultContentNegotiation'`

#### [DEFAULT_SCHEMA_CLASS](https://www.django-rest-framework.org/api-guide/settings/#default_schema_class)

视图检查器类，将用于模式生成。

默认： `'rest_framework.schemas.openapi.AutoSchema'`

------

## [通用视图设置](https://www.django-rest-framework.org/api-guide/settings/#generic-view-settings)

*以下设置控制基于通用类的视图的行为。*

#### [DEFAULT_FILTER_BACKENDS](https://www.django-rest-framework.org/api-guide/settings/#default_filter_backends)

应当用于常规过滤的过滤器后端类的列表。如果设置为，`None`则禁用通用过滤。

#### [DEFAULT_PAGINATION_CLASS](https://www.django-rest-framework.org/api-guide/settings/#default_pagination_class)

用于查询集分页的默认类。如果设置为`None`，则默认情况下禁用分页。有关[设置](https://www.django-rest-framework.org/api-guide/pagination/#setting-the-pagination-style)和 [修改](https://www.django-rest-framework.org/api-guide/pagination/#modifying-the-pagination-style)分页样式的更多指导，请参见分页文档 。

默认： `None`

#### [页面大小](https://www.django-rest-framework.org/api-guide/settings/#page_size)

用于分页的默认页面大小。如果设置为`None`，则默认情况下禁用分页。

默认： `None`

### [SEARCH_PARAM](https://www.django-rest-framework.org/api-guide/settings/#search_param)

查询参数的名称，可用于指定所使用的搜索词`SearchFilter`。

默认： `search`

#### [ORDERING_PARAM](https://www.django-rest-framework.org/api-guide/settings/#ordering_param)

查询参数的名称，可用于指定所返回的结果的顺序`OrderingFilter`。

默认： `ordering`

------

## [版本设置](https://www.django-rest-framework.org/api-guide/settings/#versioning-settings)

#### [DEFAULT_VERSION](https://www.django-rest-framework.org/api-guide/settings/#default_version)

`request.version`不存在版本信息时应使用的值。

默认： `None`

#### [ALLOWED_VERSIONS](https://www.django-rest-framework.org/api-guide/settings/#allowed_versions)

如果设置，则此值将限制版本控制方案可能返回的版本集，如果提供的版本不在此版本集中，则将引发错误。

默认： `None`

#### [VERSION_PARAM](https://www.django-rest-framework.org/api-guide/settings/#version_param)

任何版本控制参数（例如，媒体类型或URL查询参数）中应使用的字符串。

默认： `'version'`

------

## [验证设定](https://www.django-rest-framework.org/api-guide/settings/#authentication-settings)

*以下设置控制未经身份验证的请求的行为。*

#### [UNAUTHENTICATED_USER](https://www.django-rest-framework.org/api-guide/settings/#unauthenticated_user)

`request.user`用于未经身份验证的请求初始化的类。（如果要完全删除身份验证，例如通过`django.contrib.auth`从中 删除`INSTALLED_APPS`，请设置`UNAUTHENTICATED_USER`为`None`。

默认： `django.contrib.auth.models.AnonymousUser`

#### [UNAUTHENTICATED_TOKEN](https://www.django-rest-framework.org/api-guide/settings/#unauthenticated_token)

`request.auth`用于未经身份验证的请求初始化的类。

默认： `None`

------

## [测试设定](https://www.django-rest-framework.org/api-guide/settings/#test-settings)

*以下设置控制APIRequestFactory和APIClient的行为*

#### [TEST_REQUEST_DEFAULT_FORMAT](https://www.django-rest-framework.org/api-guide/settings/#test_request_default_format)

发出测试请求时应使用的默认格式。

这应该与`TEST_REQUEST_RENDERER_CLASSES`设置中渲染器类之一的格式匹配。

默认： `'multipart'`

#### [TEST_REQUEST_RENDERER_CLASSES](https://www.django-rest-framework.org/api-guide/settings/#test_request_renderer_classes)

构建测试请求时支持的渲染器类。

构造测试请求时，可以使用任何这些渲染器类的格式，例如： `client.post('/users', {'username': 'jamie'}, format='json')`

默认：

```
[
    'rest_framework.renderers.MultiPartRenderer',
    'rest_framework.renderers.JSONRenderer'
]
```

------

## [模式生成控件](https://www.django-rest-framework.org/api-guide/settings/#schema-generation-controls)

#### [SCHEMA_COERCE_PATH_PK](https://www.django-rest-framework.org/api-guide/settings/#schema_coerce_path_pk)

如果设置，则`'pk'`在生成架构路径参数时将URL conf中的标识符映射到实际的字段名称。通常是`'id'`。由于“主键”是实现细节，因此给出了更合适的表示形式，而“标识符”是更笼统的概念。

默认： `True`

#### [SCHEMA_COERCE_METHOD_NAMES](https://www.django-rest-framework.org/api-guide/settings/#schema_coerce_method_names)

如果设置，则用于将内部视图集方法名称映射到架构生成中使用的外部操作名称。这使我们能够生成比在代码库内部使用的名称更适合于外部表示的名称。

默认： `{'retrieve': 'read', 'destroy': 'delete'}`

------

## [内容类型控件](https://www.django-rest-framework.org/api-guide/settings/#content-type-controls)

#### [URL_FORMAT_OVERRIDE](https://www.django-rest-framework.org/api-guide/settings/#url_format_override)

URL参数的名称，可以通过在请求URL中`Accept`使用`format=…`查询参数来覆盖默认的内容协商标头行为。

例如： `http://example.com/organizations/?format=csv`

如果此设置的值为，`None`则URL格式替代将被禁用。

默认： `'format'`

#### [FORMAT_SUFFIX_KWARG](https://www.django-rest-framework.org/api-guide/settings/#format_suffix_kwarg)

URL conf中的参数名称，可用于提供格式后缀。当`format_suffix_patterns`用于包括后缀URL模式时，将应用此设置。

例如： `http://example.com/organizations.csv/`

默认： `'format'`

------

## [日期和时间格式](https://www.django-rest-framework.org/api-guide/settings/#date-and-time-formatting)

*以下设置用于控制如何解析和呈现日期和时间表示形式。*

#### [DATETIME_FORMAT](https://www.django-rest-framework.org/api-guide/settings/#datetime_format)

缺省情况下应使用格式字符串来呈现`DateTimeField`序列化程序字段的输出。如果为`None`，则`DateTimeField`序列化程序字段将返回Python `datetime`对象，并且日期时间编码将由渲染器确定。

可在任何的`None`，`'iso-8601'`或一个Python [的strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串。

默认： `'iso-8601'`

#### [DATETIME_INPUT_FORMATS](https://www.django-rest-framework.org/api-guide/settings/#datetime_input_formats)

默认情况下，用于解析对`DateTimeField`序列化器字段的输入的格式字符串列表。

可能是包含字符串`'iso-8601'`或Python [strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串的列表。

默认： `['iso-8601']`

#### [日期格式](https://www.django-rest-framework.org/api-guide/settings/#date_format)

缺省情况下应使用格式字符串来呈现`DateField`序列化程序字段的输出。如果为`None`，则`DateField`序列化程序字段将返回Python `date`对象，日期编码将由渲染器确定。

可在任何的`None`，`'iso-8601'`或一个Python [的strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串。

默认： `'iso-8601'`

#### [DATE_INPUT_FORMATS](https://www.django-rest-framework.org/api-guide/settings/#date_input_formats)

默认情况下，用于解析对`DateField`序列化器字段的输入的格式字符串列表。

可能是包含字符串`'iso-8601'`或Python [strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串的列表。

默认： `['iso-8601']`

#### [时间格式](https://www.django-rest-framework.org/api-guide/settings/#time_format)

缺省情况下应使用格式字符串来呈现`TimeField`序列化程序字段的输出。如果为`None`，则`TimeField`序列化程序字段将返回Python `time`对象，并且时间编码将由渲染器确定。

可在任何的`None`，`'iso-8601'`或一个Python [的strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串。

默认： `'iso-8601'`

#### [TIME_INPUT_FORMATS](https://www.django-rest-framework.org/api-guide/settings/#time_input_formats)

默认情况下，用于解析对`TimeField`序列化器字段的输入的格式字符串列表。

可能是包含字符串`'iso-8601'`或Python [strftime格式](https://docs.python.org/3/library/time.html#time.strftime)字符串的列表。

默认： `['iso-8601']`

------

## [编码方式](https://www.django-rest-framework.org/api-guide/settings/#encodings)

#### [UNICODE_JSON](https://www.django-rest-framework.org/api-guide/settings/#unicode_json)

设置`True`为时，JSON响应将允许在响应中使用Unicode字符。例如：

```
{"unicode black star":"★"}
```

设置`False`为时，JSON响应将转义非ascii字符，如下所示：

```
{"unicode black star":"\u2605"}
```

两种样式均符合[RFC 4627](https://www.ietf.org/rfc/rfc4627.txt)，并且在语法上均是有效的JSON。首选unicode样式，因为它在检查API响应时更加用户友好。

默认： `True`

#### [COMPACT_JSON](https://www.django-rest-framework.org/api-guide/settings/#compact_json)

设置`True`为时，JSON响应将返回紧凑的表示形式，在`':'`和`','`字符后没有空格。例如：

```
{"is_admin":false,"email":"jane@example"}
```

设置`False`为时，JSON响应将返回更多详细的表示形式，如下所示：

```
{"is_admin": false, "email": "jane@example"}
```

默认样式是返回最小的响应，这与[Heroku的API设计指南一致](https://github.com/interagent/http-api-design#keep-json-minified-in-all-responses)。

默认： `True`

#### [STRICT_JSON](https://www.django-rest-framework.org/api-guide/settings/#strict_json)

当设置为`True`，JSON渲染和解析只会遵守语法有效的JSON，提高了扩展浮点值异常（`nan`，`inf`，`-inf`）由Python的接受`json`模块。这是建议的设置，因为通常不支持这些值。例如，Javascript `JSON.Parse`和PostgreSQL的JSON数据类型都不接受这些值。

设置`False`为时，将允许JSON呈现和解析。但是，这些值仍然无效，需要在您的代码中进行特殊处理。

默认： `True`

#### [COERCE_DECIMAL_TO_STRING](https://www.django-rest-framework.org/api-guide/settings/#coerce_decimal_to_string)

在不支持本机十进制类型的API表示中返回十进制对象时，通常最好将值作为字符串返回。这样避免了二进制浮点实现时精度的损失。

设置`True`为时，序列化程序`DecimalField`类将返回字符串而不是`Decimal`对象。设置`False`为时，序列化程序将返回`Decimal`对象，默认JSON编码器将以浮点数返回这些对象。

默认： `True`

------

## [查看名称和描述](https://www.django-rest-framework.org/api-guide/settings/#view-names-and-descriptions)

**以下设置用于生成视图名称和描述，用于响应`OPTIONS`请求和可浏览API。**

#### [VIEW_NAME_FUNCTION](https://www.django-rest-framework.org/api-guide/settings/#view_name_function)

一个字符串，表示生成视图名称时应使用的函数。

这应该是具有以下签名的函数：

```
view_name(self)
```

- `self`：视图实例。通常，名称函数在访问时会生成描述性名称，从而检查类的名称`self.__class__.__name__`。

如果视图实例继承`ViewSet`，则可能已使用几个可选参数对其进行了初始化：

- `name`：显式提供给视图集中视图的名称。通常，提供时应按原样使用此值。
- `suffix`：在视图集中区分单个视图时使用的文本。此参数与互斥`name`。
- `detail`：布尔值，用于将视图集中的单个视图区分为“列表”视图还是“详细”视图。

默认： `'rest_framework.views.get_view_name'`

#### [VIEW_DESCRIPTION_FUNCTION](https://www.django-rest-framework.org/api-guide/settings/#view_description_function)

一个字符串，表示生成视图描述时应使用的功能。

可以更改此设置以支持默认的markdown以外的标记样式。例如，您可以使用它来支持`rst`在可浏览API中输出的视图文档字符串中的标记。

这应该是具有以下签名的函数：

```
view_description(self, html=False)
```

- `self`：视图实例。通常，描述函数会在生成描述时通过访问来检查类的文档字符串`self.__class__.__doc__`
- `html`：一个布尔值，指示是否需要HTML输出。 `True`用于可浏览的API中以及`False`用于生成`OPTIONS`响应时。

如果视图实例继承`ViewSet`，则可能已使用几个可选参数对其进行了初始化：

- `description`：在视图集中显式提供给视图的描述。通常，这是由额外的viewset设置`action`的，应原样使用。

默认： `'rest_framework.views.get_view_description'`

## [HTML选择字段截止](https://www.django-rest-framework.org/api-guide/settings/#html-select-field-cutoffs)

用于在可浏览的API中[呈现关系字段的选择字段截止的](https://www.django-rest-framework.org/api-guide/relations/#select-field-cutoffs)全局设置。

#### [HTML_SELECT_CUTOFF](https://www.django-rest-framework.org/api-guide/settings/#html_select_cutoff)

`html_cutoff`值的全局设置。必须为整数。

默认值：1000

#### [HTML_SELECT_CUTOFF_TEXT](https://www.django-rest-framework.org/api-guide/settings/#html_select_cutoff_text)

一个字符串，代表的全局设置`html_cutoff_text`。

默认： `"More than {count} items..."`

------

## [其他设定](https://www.django-rest-framework.org/api-guide/settings/#miscellaneous-settings)

#### [EXCEPTION_HANDLER](https://www.django-rest-framework.org/api-guide/settings/#exception_handler)

一个字符串，表示在返回任何给定异常的响应时应使用的函数。如果函数返回`None`，将引发500错误。

可以更改此设置以支持默认`{"detail": "Failure..."}`响应以外的错误响应。例如，您可以使用它来提供API响应，例如`{"errors": [{"message": "Failure...", "code": ""} ...]}`。

这应该是具有以下签名的函数：

```
exception_handler(exc, context)
```

- `exc`：例外。

默认： `'rest_framework.views.exception_handler'`

#### [NON_FIELD_ERRORS_KEY](https://www.django-rest-framework.org/api-guide/settings/#non_field_errors_key)

一个字符串，它表示应该用于序列化程序错误的键，该错误不引用特定字段，而是常规错误。

默认： `'non_field_errors'`

#### [URL_FIELD_NAME](https://www.django-rest-framework.org/api-guide/settings/#url_field_name)

一个字符串，代表应用于生成的URL字段的密钥`HyperlinkedModelSerializer`。

默认： `'url'`

#### [NUM_PROXIES](https://www.django-rest-framework.org/api-guide/settings/#num_proxies)

0或更大的整数，可用于指定API在其后运行的应用程序代理的数量。这允许节流以更准确地标识客户端IP地址。如果设置为，`None`那么节流类将使用不太严格的IP匹配。

默认： `None`