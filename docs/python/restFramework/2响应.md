# [Responses](https://www.django-rest-framework.org/api-guide/responses/#responses)

> 与基本的HttpResponse对象不同，TemplateResponse对象保留视图提供的上下文详细信息以计算响应。直到需要时才在响应过程的后面计算响应的最终输出。
>
> — [Django文档](https://docs.djangoproject.com/en/stable/ref/template-response/)

REST框架通过提供一个`Response`类来支持HTTP内容协商，该类允许您根据客户端请求返回可以呈现为多种内容类型的内容。

在`Response`类的子类Django的`SimpleTemplateResponse`。 `Response`对象使用数据初始化，该数据应包含本地Python原语。然后，REST框架使用标准的HTTP内容协商来确定应如何呈现最终响应内容。

不需要使用`Response`该类，也可以根据需要从视图中返回常规`HttpResponse`或`StreamingHttpResponse`对象。使用`Response`该类只是为返回内容协商的Web API响应提供了一个更好的接口，该响应可以呈现为多种格式。

除非出于某种原因要大量定制REST框架，否则应始终对返回对象的视图使用`APIView`类或`@api_view`函数`Response`。这样做可确保在视图返回视图之前，视图可以执行内容协商并为响应选择适当的渲染器。

------

# [建立回应](https://www.django-rest-framework.org/api-guide/responses/#creating-responses)

## [Response()](https://www.django-rest-framework.org/api-guide/responses/#response)

**签名：** `Response(data, status=None, template_name=None, headers=None, content_type=None)`

与常规`HttpResponse`对象不同，您不会实例化`Response`具有渲染内容的对象。相反，您传递未渲染的数据，该数据可能包含任何Python原语。

`Response`该类使用的渲染器无法本地处理诸如Django模型实例之类的复杂数据类型，因此您需要在创建`Response`对象之前将数据序列化为原始数据类型。

您可以使用REST框架的`Serializer`类来执行此数据序列化，也可以使用自己的自定义序列化。

参数：

- `data`：响应的序列化数据。
- `status`：响应的状态码。默认值为200。另请参见[状态码](https://www.django-rest-framework.org/api-guide/status-codes/)。
- `template_name`：`HTMLRenderer`选择了要使用的模板名称。
- `headers`：在响应中使用的HTTP标头字典。
- `content_type`：响应的内容类型。通常，这将由呈现器根据内容协商确定自动设置，但是在某些情况下，您需要显式指定内容类型。

------

# [属性](https://www.django-rest-framework.org/api-guide/responses/#attributes)

## [.data](https://www.django-rest-framework.org/api-guide/responses/#data)

响应的未呈现的序列化数据。

## [.status_code](https://www.django-rest-framework.org/api-guide/responses/#status_code)

HTTP响应的数字状态码。

## [.content](https://www.django-rest-framework.org/api-guide/responses/#content)

响应的呈现内容。必须先调用`.render()`方法，然后`.content`才能访问该方法。

## [.template_name](https://www.django-rest-framework.org/api-guide/responses/#template_name)

的`template_name`，如果提供。仅当`HTMLRenderer`或其他自定义模板渲染器是响应的可接受渲染器时才需要。

## [.accepted_renderer](https://www.django-rest-framework.org/api-guide/responses/#accepted_renderer)

将用于呈现响应的呈现器实例。

由`APIView`或`@api_view`在视图返回响应之前自动设置。

## [.accepted_media_type](https://www.django-rest-framework.org/api-guide/responses/#accepted_media_type)

内容协商阶段选择的媒体类型。

由`APIView`或`@api_view`在视图返回响应之前自动设置。

## [.renderer_context](https://www.django-rest-framework.org/api-guide/responses/#renderer_context)

附加上下文信息的词典，该词典将传递给渲染器的`.render()`方法。

由`APIView`或`@api_view`在视图返回响应之前自动设置。

------

# [标准HttpResponse属性](https://www.django-rest-framework.org/api-guide/responses/#standard-httpresponse-attributes)

在`Response`类扩展`SimpleTemplateResponse`，和所有常见的属性和方法也可在回应。例如，您可以以标准方式在响应上设置标头：

```python
response = Response()
response['Cache-Control'] = 'no-cache'
```

## [.render（）](https://www.django-rest-framework.org/api-guide/responses/#render)

**签名：** `.render()`

与任何其他`TemplateResponse`方法一样，调用此方法可将响应的序列化数据呈现为最终响应内容。当`.render()`被调用时，响应内容将被设置为调用的结果`.render(data, accepted_media_type, renderer_context)`对方法`accepted_renderer`实例。

通常，您不需要自称`.render()`，因为它是Django的标准响应周期所处理的。